# KeyPilot Launch Checklist

> 发布前检查清单 - 确保产品准备就绪

---

## 📋 功能完整性检查

### 核心功能
- [x] 用户注册/登录（邮箱密码、Magic Link）
- [x] 平台账号配置（OpenAI、Claude、OpenRouter、火山引擎）
- [x] API Key 管理（导入、创建、删除、同步）
- [x] 用量监控和统计
- [x] 仪表盘数据展示
- [x] 团队成员管理
- [x] 操作日志记录

### 订阅与支付
- [x] 订阅计划展示
- [x] PayPal 支付集成
- [x] 功能限制（免费版 1 Key）
- [x] 升级引导
- [ ] 订阅续费通知
- [ ] 取消订阅流程

### 告警系统
- [x] 告警配置表
- [x] 告警展示组件
- [ ] 低余额告警触发
- [ ] Key 过期告警触发
- [ ] 邮件通知发送

### 数据导出
- [x] CSV 导出
- [x] Excel 导出
- [x] 免费版限制

---

## 🔧 环境配置检查

### Supabase
- [ ] 生产环境数据库已创建
- [ ] 所有迁移已执行：
  ```
  01_base_tables.sql
  02_add_tenant_isolation.sql
  03_add_key_owners.sql
  04_add_activity_log.sql
  05_add_teams.sql
  06_fix_rls_policies.sql
  07_alerts_with_rls.sql
  08_subscriptions.sql
  09_public_stats.sql
  fix_team_members_rls.sql
  fix_llm_api_key_owners_rls.sql
  ```
- [ ] RLS 策略已启用并测试
- [ ] Service Role Key 已安全存储
- [ ] SMTP 邮件已配置（用于认证邮件）

### Vercel 部署
- [ ] 环境变量已配置：
  ```
  VITE_SUPABASE_URL
  VITE_SUPABASE_ANON_KEY
  SUPABASE_SERVICE_ROLE_KEY
  ```
- [ ] 自定义域名已绑定
- [ ] SSL 证书已启用
- [ ] Vercel Functions 区域选择（推荐 iad1 美东）

### PayPal
- [ ] 生产环境 Client ID 已配置
- [ ] Subscription Plan IDs 已更新
- [ ] Webhook 已配置（可选）

---

## 🔒 安全检查

### 密钥安全
- [ ] 所有 API Key 使用加密存储
- [ ] Service Role Key 不暴露给客户端
- [ ] 环境变量不提交到代码仓库

### 认证安全
- [ ] JWT 配置正确
- [ ] Session 过期时间合理
- [ ] CORS 配置正确

### 数据安全
- [ ] RLS 策略测试通过
- [ ] 租户隔离测试通过
- [ ] SQL 注入防护测试

---

## 🚀 性能优化

### 前端
- [ ] 生产构建优化 (`pnpm build`)
- [ ] 代码分割正常
- [ ] 图片/静态资源 CDN
- [ ] Gzip 压缩启用

### 后端
- [ ] 数据库索引已创建
- [ ] 查询性能优化
- [ ] API 响应时间 < 500ms

---

## 🧪 测试检查

### 功能测试
- [ ] 新用户注册流程
- [ ] 登录/登出流程
- [ ] 添加平台账号
- [ ] 创建/导入 API Key
- [ ] 数据同步
- [ ] 订阅升级流程
- [ ] 团队成员邀请

### 兼容性测试
- [ ] Chrome 最新版
- [ ] Firefox 最新版
- [ ] Safari 最新版
- [ ] 移动端响应式

### 异常测试
- [ ] 网络错误处理
- [ ] API 错误处理
- [ ] 表单验证
- [ ] 权限不足处理

---

## 📱 用户体验

### 引导
- [x] 平台账号添加指南
- [ ] 新用户引导流程（可选）
- [ ] 帮助文档链接

### 国际化
- [x] 英文翻译完整
- [x] 中文翻译完整
- [ ] 语言切换正常

### 错误提示
- [ ] 友好的错误信息
- [ ] 加载状态提示
- [ ] 操作成功反馈

---

## 📊 监控与分析

### 错误监控
- [ ] Sentry/LogRocket 配置（可选）
- [ ] 前端错误上报
- [ ] API 错误日志

### 用户分析
- [ ] Google Analytics / Plausible（可选）
- [ ] 转化漏斗追踪
- [ ] 用户行为分析

---

## 📝 文档与合规

### 用户文档
- [ ] README 更新
- [ ] API 文档（如需）
- [ ] FAQ 页面（可选）

### 法律合规
- [ ] 隐私政策页面
- [ ] 服务条款页面
- [ ] Cookie 政策（如需）
- [ ] GDPR 合规（如面向欧盟）

---

## 🎯 发布步骤

### 发布前
1. [ ] 完成所有上述检查项
2. [ ] 备份当前数据库
3. [ ] 通知团队成员

### 发布
1. [ ] 合并代码到 main 分支
2. [ ] Vercel 自动部署
3. [ ] 验证生产环境正常
4. [ ] DNS 切换（如新域名）

### 发布后
1. [ ] 监控错误日志
2. [ ] 监控服务器性能
3. [ ] 收集用户反馈
4. [ ] 准备热修复流程

---

## 🐛 已知问题

> 记录已知但可接受的问题

1. **告警邮件通知** - 暂未实现，后续版本添加
2. **取消订阅** - 需要联系客服，后续自动化
3. **删除平台账号** - 功能待实现

---

## 📅 版本历史

| 版本 | 日期 | 说明 |
|------|------|------|
| 1.0.0 | 2026-02-xx | 首次发布 |

---

*最后更新：2026-02-02*

